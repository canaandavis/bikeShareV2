var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(t,n,r,i,s,o,u,a){var f=a.bits,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w,E,S,x,T,N=null,C=0,k,L=new utils.Buf16(MAXBITS+1),A=new utils.Buf16(MAXBITS+1),O=null,M=0,_,D,P;for(l=0;l<=MAXBITS;l++)L[l]=0;for(c=0;c<i;c++)L[n[r+c]]++;d=f;for(p=MAXBITS;p>=1;p--)if(L[p]!==0)break;d>p&&(d=p);if(p===0)return s[o++]=20971520,s[o++]=20971520,a.bits=1,0;for(h=1;h<p;h++)if(L[h]!==0)break;d<h&&(d=h),g=1;for(l=1;l<=MAXBITS;l++){g<<=1,g-=L[l];if(g<0)return-1}if(g>0&&(t===CODES||p!==1))return-1;A[1]=0;for(l=1;l<MAXBITS;l++)A[l+1]=A[l]+L[l];for(c=0;c<i;c++)n[r+c]!==0&&(u[A[n[r+c]]++]=c);t===CODES?(N=O=u,k=19):t===LENS?(N=lbase,C-=257,O=lext,M-=257,k=256):(N=dbase,O=dext,k=-1),b=0,c=0,l=h,T=o,v=d,m=0,S=-1,y=1<<d,x=y-1;if(t===LENS&&y>ENOUGH_LENS||t===DISTS&&y>ENOUGH_DISTS)return 1;var H=0;for(;;){H++,_=l-m,u[c]<k?(D=0,P=u[c]):u[c]>k?(D=O[M+u[c]],P=N[C+u[c]]):(D=96,P=0),w=1<<l-m,E=1<<v,h=E;do E-=w,s[T+(b>>m)+E]=_<<24|D<<16|P|0;while(E!==0);w=1<<l-1;while(b&w)w>>=1;w!==0?(b&=w-1,b+=w):b=0,c++;if(--L[l]===0){if(l===p)break;l=n[r+u[c]]}if(l>d&&(b&x)!==S){m===0&&(m=d),T+=h,v=l-m,g=1<<v;while(v+m<p){g-=L[v+m];if(g<=0)break;v++,g<<=1}y+=1<<v;if(t===LENS&&y>ENOUGH_LENS||t===DISTS&&y>ENOUGH_DISTS)return 1;S=b&x,s[S]=d<<24|v<<16|T-o|0}}return b!==0&&(s[T+b]=l-m<<24|64<<16|0),a.bits=d,0};