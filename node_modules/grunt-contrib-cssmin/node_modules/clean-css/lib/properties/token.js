module.exports=function(){var e=function(e){function n(t,n,r){this.prop=t,typeof n=="string"?(this.value=n,this.isImportant=r):(this.value=e[t].defaultValue,this.isImportant=n)}var t="!important";return n.prototype.prop=null,n.prototype.value=null,n.prototype.granularValues=null,n.prototype.components=null,n.prototype.position=null,n.prototype.isImportant=!1,n.prototype.isDirty=!1,n.prototype.isShorthand=!1,n.prototype.isIrrelevant=!1,n.prototype.isReal=!0,n.prototype.isMarkedForDeletion=!1,n.prototype.isComponentOf=function(t){return!e[this.prop]||!e[t.prop]?!1:e[t.prop].components instanceof Array&&!!e[t.prop].components.length?e[t.prop].components.indexOf(this.prop)>=0:!1},n.prototype.clone=function(e){var t=new n(this.prop,this.value,typeof e!="undefined"?e:this.isImportant);return t},n.prototype.cloneIrrelevant=function(e){var t=n.makeDefault(this.prop,typeof e!="undefined"?e:this.isImportant);return t.isIrrelevant=!0,t},n.makeDefaults=function(e,t){return e.map(function(e){return new n(e,t)})},n.tokenizeOne=function(r){var i=r.indexOf(":");if(i<0)return new n("",r);var s=r.substr(0,i).trim(),o=r.substr(i+1).trim(),u=!1,a=o.indexOf(t);a>=1&&a===o.length-t.length&&(o=o.substr(0,a).trim(),u=!0);var f=new n(s,o,u);return e[s]&&e[s].isShorthand&&(f.isShorthand=!0,f.components=e[s].breakUp(f),f.isDirty=!0),f},n.tokenize=function(e){var t=e.split(";").map(n.tokenizeOne);return t},n.detokenize=function(n){n instanceof Array||(n=[n]);var r="";for(var i=0;i<n.length;i++){var s=n[i];if(s.isShorthand&&s.isDirty){var o=e[s.prop].putTogether(s.prop,s.components,s.isImportant);Array.prototype.splice.apply(n,[i,1].concat(o)),s.isDirty=!1,i--;continue}s.prop&&(r+=s.prop+":"),s.value&&(r+=s.value),s.isImportant&&(r+=t),r+=";"}return r.substr(0,r.length-1)},n.getDetokenizedLength=function(n){n instanceof Array||(n=[n]);var r=0;for(var i=0;i<n.length;i++){var s=n[i];if(s.isShorthand&&s.isDirty){var o=e[s.prop].putTogether(s.prop,s.components,s.isImportant);Array.prototype.splice.apply(n,[i,1].concat(o)),s.isDirty=!1,i--;continue}s.prop&&(r+=s.prop.length+1),s.value&&(r+=s.value.length),s.isImportant&&(r+=t.length)}return r},n};return{createTokenPrototype:e}}();