function getStrictDecoder(e){var t=Object.keys(e).join("|"),n=getReplacer(e);t+="|#[xX][\\da-fA-F]+|#\\d+";var r=new RegExp("&(?:"+t+");","g");return function(e){return String(e).replace(r,n)}}function sorter(e,t){return e<t?1:-1}function getReplacer(e){return function(n){return n.charAt(1)==="#"?n.charAt(2)==="X"||n.charAt(2)==="x"?decodeCodePoint(parseInt(n.substr(3),16)):decodeCodePoint(parseInt(n.substr(2),10)):e[n.slice(1,-1)]}}var entityMap=require("../maps/entities.json"),legacyMap=require("../maps/legacy.json"),xmlMap=require("../maps/xml.json"),decodeCodePoint=require("./decode_codepoint.js"),decodeXMLStrict=getStrictDecoder(xmlMap),decodeHTMLStrict=getStrictDecoder(entityMap),decodeHTML=function(){function o(e){return e.substr(-1)!==";"&&(e+=";"),s(e)}var e=Object.keys(legacyMap).sort(sorter),t=Object.keys(entityMap).sort(sorter);for(var n=0,r=0;n<t.length;n++)e[r]===t[n]?(t[n]+=";?",r++):t[n]+=";";var i=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=getReplacer(entityMap);return function(e){return String(e).replace(i,o)}}();module.exports={XML:decodeXMLStrict,HTML:decodeHTML,HTMLStrict:decodeHTMLStrict};