var makeDom=require("../utils").makeDom,helpers=require("../.."),assert=require("assert");describe("helpers",function(){describe("removeSubsets",function(){var e=helpers.removeSubsets,t=makeDom("<div><p><span></span></p><p></p></div>")[0];it("removes identical trees",function(){var n=e([t,t]);assert.equal(n.length,1)}),it("Removes subsets found first",function(){var n=e([t,t.children[0].children[0]]);assert.equal(n.length,1)}),it("Removes subsets found last",function(){var n=e([t.children[0],t]);assert.equal(n.length,1)}),it("Does not remove unique trees",function(){var n=e([t.children[0],t.children[1]]);assert.equal(n.length,2)})}),describe("compareDocumentPosition",function(){var e=helpers.compareDocumentPosition,t="<div><p><span></span></p><a></a></div>",n=makeDom(t)[0],r=n.children[0],i=r.children[0],s=n.children[1];it("reports when the first node occurs before the second indirectly",function(){assert.equal(e(i,s),2)}),it("reports when the first node contains the second",function(){assert.equal(e(r,i),10)}),it("reports when the first node occurs after the second indirectly",function(){assert.equal(e(s,i),4)}),it("reports when the first node is contained by the second",function(){assert.equal(e(i,r),20)}),it("reports when the nodes belong to separate documents",function(){var n=makeDom(t)[0].children[0].children[0];assert.equal(e(i,n),1)}),it("reports when the nodes are identical",function(){assert.equal(e(i,i),0)})}),describe("uniqueSort",function(){var e=helpers.uniqueSort,t,n,r,i;beforeEach(function(){t=makeDom("<div><p><span></span></p><a></a></div>")[0],n=t.children[0],r=n.children[0],i=t.children[1]}),it("leaves unique elements untouched",function(){assert.deepEqual(e([n,i]),[n,i])}),it("removes duplicate elements",function(){assert.deepEqual(e([n,i,n]),[n,i])}),it("sorts nodes in document order",function(){assert.deepEqual(e([i,t,r,n]),[t,n,r,i])})})});