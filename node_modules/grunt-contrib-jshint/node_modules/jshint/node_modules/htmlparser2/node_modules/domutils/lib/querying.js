function filter(e,t,n,r){Array.isArray(t)||(t=[t]);if(typeof r!="number"||!isFinite(r))r=Infinity;return find(e,t,n!==!1,r)}function find(e,t,n,r){var i=[],s;for(var o=0,u=t.length;o<u;o++){if(e(t[o])){i.push(t[o]);if(--r<=0)break}s=t[o].children;if(n&&s&&s.length>0){s=find(e,s,n,r),i=i.concat(s),r-=s.length;if(r<=0)break}}return i}function findOneChild(e,t){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return t[n];return null}function findOne(e,t){var n=null;for(var r=0,i=t.length;r<i&&!n;r++){if(!isTag(t[r]))continue;e(t[r])?n=t[r]:t[r].children.length>0&&(n=findOne(e,t[r].children))}return n}function existsOne(e,t){for(var n=0,r=t.length;n<r;n++)if(isTag(t[n])&&(e(t[n])||t[n].children.length>0&&existsOne(e,t[n].children)))return!0;return!1}function findAll(e,t){var n=[];for(var r=0,i=t.length;r<i;r++){if(!isTag(t[r]))continue;e(t[r])&&n.push(t[r]),t[r].children.length>0&&(n=n.concat(findAll(e,t[r].children)))}return n}var isTag=require("domelementtype").isTag;module.exports={filter:filter,find:find,findOneChild:findOneChild,findOne:findOne,existsOne:existsOne,findAll:findAll};