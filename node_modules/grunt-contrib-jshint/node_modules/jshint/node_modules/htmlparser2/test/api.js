var htmlparser2=require(".."),assert=require("assert");describe("API",function(){it("should load all modules",function(){var e=require("../lib/Stream.js");assert.strictEqual(htmlparser2.Stream,e,"should load module"),assert.strictEqual(htmlparser2.Stream,e,"should load it again (cache)");var t=require("../lib/ProxyHandler.js");assert.strictEqual(htmlparser2.ProxyHandler,t,"should load module"),assert.strictEqual(htmlparser2.ProxyHandler,t,"should load it again (cache)")}),it("should work without callbacks",function(){var e=new htmlparser2.Parser(null,{xmlMode:!0,lowerCaseAttributeNames:!0});e.end("<a foo><bar></a><!-- --><![CDATA[]]]><?foo?><!bar><boo/>boohay"),e.write("foo"),e.end();var t=!1;e._cbs.onerror=function(){t=!0},e.write("foo"),assert(t),t=!1,e.end(),assert(t),e.reset(),e._cbs.onopentag=function(){},e.write("<a foo"),e._cbs.onopentag=null,e.write(">");var n=!1;e._cbs.ontext=function(e){assert.equal(e,"foo"),n=!0},e.pause(),e.write("foo"),assert(!n),e.resume(),assert(n),n=!1,e.pause(),assert(!n),e.resume(),assert(!n),e.pause(),e.end("foo"),assert(!n),e.resume(),assert(n)})});