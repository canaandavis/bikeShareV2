function _ls(e,t){function r(t,r){return path.basename(t)[0]!=="."||!!e.all||path.basename(r)[0]==="."&&path.basename(r).length>1?(common.platform==="win"&&(t=t.replace(/\\/g,"/")),n.push(t),!0):!1}e=common.parseOptions(e,{R:"recursive",A:"all",a:"all_deprecated"}),e.all_deprecated&&(common.log("ls: Option -a is deprecated. Use -A instead"),e.all=!0),t?typeof t=="object"?t=t:typeof t=="string"&&(t=[].slice.call(arguments,1)):t=["."];var n=[];return t.forEach(function(t){if(fs.existsSync(t)){var i=fs.statSync(t);if(i.isFile()){r(t,t);return}if(i.isDirectory()){fs.readdirSync(t).forEach(function(i){if(!r(i,t))return;if(e.recursive){var s=_pwd();_cd("",t),fs.statSync(i).isDirectory()&&(n=n.concat(_ls("-R"+(e.all?"A":""),i+"/*"))),_cd("",s)}});return}}var s=path.basename(t),o=path.dirname(t);if(s.search(/\*/)>-1&&fs.existsSync(o)&&fs.statSync(o).isDirectory){var u=s.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\.|\+|\?)/g,"\\$1");u="^"+u.replace(/\*/g,".*")+"$",fs.readdirSync(o).forEach(function(t){if(t.match(new RegExp(u))){if(!r(path.normalize(o+"/"+t),s))return;if(e.recursive){var i=o+"/"+t;fs.lstatSync(i).isDirectory()&&(n=n.concat(_ls("-R"+(e.all?"A":""),i+"/*")))}}});return}common.error("no such file or directory: "+t,!0)}),n}var path=require("path"),fs=require("fs"),common=require("./common"),_cd=require("./cd"),_pwd=require("./pwd");module.exports=_ls;