function execSync(e,t){function f(){if(u.silent||!fs.existsSync(r))return;var e=fs.readFileSync(r,"utf8");if(e.length<=a.length)return;process.stdout.write(e.substr(a.length)),a=e}function l(e){return(e+"").replace(/([\\"'])/g,"\\$1").replace(/\0/g,"\\0")}var n=_tempDir(),r=path.resolve(n+"/"+common.randomFileName()),i=path.resolve(n+"/"+common.randomFileName()),s=path.resolve(n+"/"+common.randomFileName()),o=path.resolve(n+"/"+common.randomFileName()),u=common.extend({silent:common.config.silent},t),a="";e+=" > "+r+" 2>&1";var c="var child = require('child_process'),     fs = require('fs');child.exec('"+l(e)+"', {env: process.env, maxBuffer: 20*1024*1024}, function(err) {"+"  fs.writeFileSync('"+l(i)+"', err ? err.code.toString() : '0');"+"});";fs.existsSync(s)&&common.unlinkSync(s),fs.existsSync(r)&&common.unlinkSync(r),fs.existsSync(i)&&common.unlinkSync(i),fs.writeFileSync(s,c),child.exec('"'+process.execPath+'" '+s,{env:process.env,cwd:_pwd(),maxBuffer:20971520});while(!fs.existsSync(i))f(),fs.writeFileSync(o,"a");while(!fs.existsSync(r))f(),fs.writeFileSync(o,"a");var h=parseInt("",10);while(isNaN(h))h=parseInt(fs.readFileSync(i,"utf8"),10);var p=fs.readFileSync(r,"utf8");try{common.unlinkSync(s)}catch(d){}try{common.unlinkSync(r)}catch(d){}try{common.unlinkSync(i)}catch(d){}try{common.unlinkSync(o)}catch(d){}(h===1||h===2||h>=126)&&common.error("",!0);var v={code:h,output:p};return v}function execAsync(e,t,n){var r="",i=common.extend({silent:common.config.silent},t),s=child.exec(e,{env:process.env,maxBuffer:20971520},function(e){n&&n(e?e.code:0,r)});return s.stdout.on("data",function(e){r+=e,i.silent||process.stdout.write(e)}),s.stderr.on("data",function(e){r+=e,i.silent||process.stdout.write(e)}),s}function _exec(e,t,n){return e||common.error("must specify command"),typeof t=="function"&&(n=t,t={async:!0}),typeof t=="object"&&typeof n=="function"&&(t.async=!0),t=common.extend({silent:common.config.silent,async:!1},t),t.async?execAsync(e,t,n):execSync(e,t)}var common=require("./common"),_tempDir=require("./tempdir"),_pwd=require("./pwd"),path=require("path"),fs=require("fs"),child=require("child_process");module.exports=_exec;