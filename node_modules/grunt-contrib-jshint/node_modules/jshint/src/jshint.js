/*!
 * JSHint, by JSHint Community.
 *
 * This file (and this file only) is licensed under the same slightly modified
 * MIT license that JSLint is. It stops evil-doers everywhere:
 *
 *   Copyright (c) 2002 Douglas Crockford  (www.JSLint.com)
 *
 *   Permission is hereby granted, free of charge, to any person obtaining
 *   a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation
 *   the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom
 *   the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included
 *   in all copies or substantial portions of the Software.
 *
 *   The Software shall be used for Good, not Evil.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 *   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 *   DEALINGS IN THE SOFTWARE.
 *
 */

var _=require("underscore"),events=require("events"),vars=require("./vars.js"),messages=require("./messages.js"),Lexer=require("./lex.js").Lexer,reg=require("./reg.js"),state=require("./state.js").state,style=require("./style.js"),console=require("console-browserify"),JSHINT=function(){function A(e,t){return e=e.trim(),/^[+-]W\d{3}$/g.test(e)?!0:i[e]===undefined&&r[e]===undefined&&r.enforcing[e]===undefined&&r.relaxing[e]===undefined&&t.type!=="jslint"&&!u[e]?(z("E001",t,e),!1):!0}function O(e){return Object.prototype.toString.call(e)==="[object String]"}function M(e,t){return e?!e.identifier||e.value!==t?!1:!0:!1}function D(e){if(!e.reserved)return!1;var t=e.meta;if(t&&t.isFutureReservedWord&&state.option.inES5()){if(!t.es5)return!1;if(t.strictOnly&&!state.option.strict&&!state.directive["use strict"])return!1;if(e.isProperty)return!1}return!0}function P(e,t){return e.replace(/\{([^{}]*)\}/g,function(e,n){var r=t[n];return typeof r=="string"||typeof r=="number"?r:e})}function H(e,t){Object.keys(t).forEach(function(n){if(_.has(JSHINT.blacklist,n))return;e[n]=t[n]})}function B(){if(state.option.enforceall){for(var e in r.enforcing)state.option[e]===undefined&&(state.option[e]=!0);for(var t in r.relaxing)state.option[t]===undefined&&(state.option[t]=!1)}}function j(){state.option.es5&&R("I003"),B(),state.option.esnext&&H(S,vars.newEcmaIdentifiers),state.option.couch&&H(S,vars.couch),state.option.qunit&&H(S,vars.qunit),state.option.rhino&&H(S,vars.rhino),state.option.shelljs&&(H(S,vars.shelljs),H(S,vars.node)),state.option.typed&&H(S,vars.typed),state.option.phantom&&H(S,vars.phantom),state.option.prototypejs&&H(S,vars.prototypejs),state.option.node&&(H(S,vars.node),H(S,vars.typed)),state.option.devel&&H(S,vars.devel),state.option.dojo&&H(S,vars.dojo),state.option.browser&&(H(S,vars.browser),H(S,vars.typed)),state.option.nonstandard&&H(S,vars.nonstandard),state.option.jasmine&&H(S,vars.jasmine),state.option.jquery&&H(S,vars.jquery),state.option.mootools&&H(S,vars.mootools),state.option.worker&&H(S,vars.worker),state.option.wsh&&H(S,vars.wsh),state.option.globalstrict&&state.option.strict!==!1&&(state.option.strict=!0),state.option.yui&&H(S,vars.yui),state.option.mocha&&H(S,vars.mocha),state.option.inMoz=function(e){return e?state.option.moz&&!state.option.esnext:state.option.moz},state.option.inESNext=function(e){return e?!state.option.moz&&state.option.esnext:state.option.moz||state.option.esnext},state.option.inES5=function(){return!state.option.es3},state.option.inES3=function(e){return e?!state.option.moz&&!state.option.esnext&&state.option.es3:state.option.es3}}function F(e,t,n){var r=Math.floor(t/state.lines.length*100),i=messages.errors[e].desc;throw{name:"JSHintError",line:t,character:n,message:i+" ("+r+"% scanned).",raw:i,code:e}}function I(e,t,n,r){return JSHINT.undefs.push([e,t,n,r])}function q(){var e=state.ignoredLines;if(_.isEmpty(e))return;JSHINT.errors=_.reject(JSHINT.errors,function(t){return e[t.line]})}function R(e,t,n,r,i,s){var o,u,a,f;if(/^W\d{3}$/.test(e)){if(state.ignored[e])return;f=messages.warnings[e]}else/E\d{3}/.test(e)?f=messages.errors[e]:/I\d{3}/.test(e)&&(f=messages.info[e]);return t=t||state.tokens.next,t.id==="(end)"&&(t=state.tokens.curr),u=t.line||0,o=t.from||0,a={id:"(error)",raw:f.desc,code:f.code,evidence:state.lines[u-1]||"",line:u,character:o,scope:JSHINT.scope,a:n,b:r,c:i,d:s},a.reason=P(f.desc,a),JSHINT.errors.push(a),q(),JSHINT.errors.length>=state.option.maxerr&&F("E043",u,o),a}function U(e,t,n,r,i,s,o){return R(e,{line:t,from:n},r,i,s,o)}function z(e,t,n,r,i,s){R(e,t,n,r,i,s)}function W(e,t,n,r,i,s,o){return z(e,{line:t,from:n},r,i,s,o)}function X(e,t){var n;return n={id:"(internal)",elem:e,value:t},JSHINT.internals.push(n),n}function V(e,t){t=t||{};var n=t.type,r=t.token,i=t.islet;n==="exception"&&_.has(c["(context)"],e)&&c[e]!==!0&&!state.option.node&&R("W002",state.tokens.next,e),_.has(c,e)&&!c["(global)"]&&(c[e]===!0?state.option.latedef&&(state.option.latedef===!0&&_.contains([c[e],n],"unction")||!_.contains([c[e],n],"unction"))&&R("W003",state.tokens.next,e):((!state.option.shadow||_.contains(["inner","outer"],state.option.shadow))&&n!=="exception"||c["(blockscope)"].getlabel(e))&&R("W004",state.tokens.next,e)),c["(context)"]&&_.has(c["(context)"],e)&&n!=="function"&&state.option.shadow==="outer"&&R("W123",state.tokens.next,e),i?c["(blockscope)"].current.add(e,n,state.tokens.curr):(c["(blockscope)"].shadow(e),c[e]=n,r&&(c["(tokens)"][e]=r),jt(c,e,{unused:t.unused||!1}),c["(global)"]?(p[e]=c,_.has(d,e)&&(state.option.latedef&&(state.option.latedef===!0&&_.contains([c[e],n],"unction")||!_.contains([c[e],n],"unction"))&&R("W003",state.tokens.next,e),delete d[e])):x[e]=c)}function $(){var e=state.tokens.next,t=e.body.split(",").map(function(e){return e.trim()}),n={};if(e.type==="globals"){t.forEach(function(e){e=e.split(":");var t=(e[0]||"").trim(),r=(e[1]||"").trim();t.charAt(0)==="-"?(t=t.slice(1),r=!1,JSHINT.blacklist[t]=t,delete S[t]):n[t]=r==="true"}),H(S,n);for(var r in n)_.has(n,r)&&(a[r]=e)}e.type==="exported"&&t.forEach(function(e){f[e]=!0}),e.type==="members"&&(w=w||{},t.forEach(function(e){var t=e.charAt(0),n=e.charAt(e.length-1);t===n&&(t==='"'||t==="'")&&(e=e.substr(1,e.length-2).replace('\\"','"')),w[e]=!1}));var i=["maxstatements","maxparams","maxdepth","maxcomplexity","maxerr","maxlen","indent"];if(e.type==="jshint"||e.type==="jslint")t.forEach(function(t){t=t.split(":");var n=(t[0]||"").trim(),r=(t[1]||"").trim();if(!A(n,e))return;if(i.indexOf(n)>=0){if(r!=="false"){r=+r;if(typeof r!="number"||!isFinite(r)||r<=0||Math.floor(r)!==r){z("E032",e,t[1].trim());return}state.option[n]=r}else state.option[n]=n==="indent"?4:!1;return}if(n==="validthis"){if(c["(global)"])return void z("E009");if(r!=="true"&&r!=="false")return void z("E002",e);state.option.validthis=r==="true";return}if(n==="quotmark"){switch(r){case"true":case"false":state.option.quotmark=r==="true";break;case"double":case"single":state.option.quotmark=r;break;default:z("E002",e)}return}if(n==="shadow"){switch(r){case"true":state.option.shadow=!0;break;case"outer":state.option.shadow="outer";break;case"false":case"inner":state.option.shadow="inner";break;default:z("E002",e)}return}if(n==="unused"){switch(r){case"true":state.option.unused=!0;break;case"false":state.option.unused=!1;break;case"vars":case"strict":state.option.unused=r;break;default:z("E002",e)}return}if(n==="latedef"){switch(r){case"true":state.option.latedef=!0;break;case"false":state.option.latedef=!1;break;case"nofunc":state.option.latedef="nofunc";break;default:z("E002",e)}return}if(n==="ignore"){switch(r){case"start":state.ignoreLinterErrors=!0;break;case"end":state.ignoreLinterErrors=!1;break;case"line":state.ignoredLines[e.line]=!0,q();break;default:z("E002",e)}return}var u=/^([+-])(W\d{3})$/g.exec(n);if(u){state.ignored[u[2]]=u[1]==="-";return}var a;if(r==="true"||r==="false"){e.type==="jslint"?(a=o[n]||n,state.option[a]=r==="true",s[a]!==undefined&&(state.option[a]=!state.option[a])):state.option[n]=r==="true",n==="newcap"&&(state.option["(explicitNewcap)"]=!0);return}z("E002",e)}),j()}function J(e){var t=e||0,n=0,r;while(n<=t)r=g[n],r||(r=g[n]=y.token()),n+=1;return r}function K(t,n){switch(state.tokens.curr.id){case"(number)":state.tokens.next.id==="."&&R("W005",state.tokens.curr);break;case"-":(state.tokens.next.id==="-"||state.tokens.next.id==="--")&&R("W006");break;case"+":(state.tokens.next.id==="+"||state.tokens.next.id==="++")&&R("W007")}if(state.tokens.curr.type==="(string)"||state.tokens.curr.identifier)e=state.tokens.curr.value;t&&state.tokens.next.id!==t&&(n?state.tokens.next.id==="(end)"?z("E019",n,n.id):z("E020",state.tokens.next,t,n.id,n.line,state.tokens.next.value):(state.tokens.next.type!=="(identifier)"||state.tokens.next.value!==t)&&R("W116",state.tokens.next,t,state.tokens.next.value)),state.tokens.prev=state.tokens.curr,state.tokens.curr=state.tokens.next;for(;;){state.tokens.next=g.shift()||y.token(),state.tokens.next||F("E041",state.tokens.curr.line);if(state.tokens.next.id==="(end)"||state.tokens.next.id==="(error)")return;state.tokens.next.check&&state.tokens.next.check();if(state.tokens.next.isSpecial)$();else if(state.tokens.next.id!=="(endline)")break}}function Q(e){return e.infix||!e.identifier&&!!e.led}function G(){var e=state.tokens.curr,t=state.tokens.next;return t.id===";"||t.id==="}"||t.id===":"?!0:Q(t)===Q(e)||e.id==="yield"&&state.option.inMoz(!0)?e.line!==t.line:!1}function Y(t,n){var r,i=!1,s=!1,o=!1;!n&&state.tokens.next.value==="let"&&J(0).value==="("&&(state.option.inMoz(!0)||R("W118",state.tokens.next,"let expressions"),o=!0,c["(blockscope)"].stack(),K("let"),K("("),state.syntax.let.fud.call(state.syntax.let.fud,!1),K(")")),state.tokens.next.id==="(end)"&&z("E006",state.tokens.curr);var u=state.option.asi&&state.tokens.prev.line<state.tokens.curr.line&&_.contains(["]",")"],state.tokens.prev.id)&&_.contains(["[","("],state.tokens.curr.id);u&&R("W014",state.tokens.curr,state.tokens.curr.id),K(),n&&(e="anonymous",c["(verb)"]=state.tokens.curr.value);if(n===!0&&state.tokens.curr.fud)r=state.tokens.curr.fud();else{state.tokens.curr.nud?r=state.tokens.curr.nud():z("E030",state.tokens.curr,state.tokens.curr.id);while(t<state.tokens.next.lbp&&!G())i=state.tokens.curr.value==="Array",s=state.tokens.curr.value==="Object",r&&(r.value||r.first&&r.first.value)&&(r.value!=="new"||r.first&&r.first.value&&r.first.value===".")&&(i=!1,r.value!==state.tokens.curr.value&&(s=!1)),K(),i&&state.tokens.curr.id==="("&&state.tokens.next.id===")"&&R("W009",state.tokens.curr),s&&state.tokens.curr.id==="("&&state.tokens.next.id===")"&&R("W010",state.tokens.curr),r&&state.tokens.curr.led?r=state.tokens.curr.led(r):z("E033",state.tokens.curr,state.tokens.curr.id)}return o&&c["(blockscope)"].unstack(),r}function Z(e,t){e=e||state.tokens.curr,t=t||state.tokens.next,!state.option.laxbreak&&e.line!==t.line&&R("W014",t,t.value)}function et(e){e=e||state.tokens.curr,e.line!==state.tokens.next.line&&R("E022",e,e.value)}function tt(e,t){e.line!==t.line&&(state.option.laxcomma||(nt.first&&(R("I001"),nt.first=!1),R("W014",e,t.value)))}function nt(e){e=e||{},e.peek?tt(state.tokens.prev,state.tokens.curr):(tt(state.tokens.curr,state.tokens.next),K(","));if(state.tokens.next.identifier&&(!e.property||!state.option.inES5()))switch(state.tokens.next.value){case"break":case"case":case"catch":case"continue":case"default":case"do":case"else":case"finally":case"for":case"if":case"in":case"instanceof":case"return":case"switch":case"throw":case"try":case"var":case"let":case"while":case"with":return z("E024",state.tokens.next,state.tokens.next.value),!1}if(state.tokens.next.type==="(punctuator)")switch(state.tokens.next.value){case"}":case"]":case",":if(e.allowTrailing)return!0;case")":return z("E024",state.tokens.next,state.tokens.next.value),!1}return!0}function rt(e,t){var n=state.syntax[e];if(!n||typeof n!="object")state.syntax[e]=n={id:e,lbp:t,value:e};return n}function it(e){return rt(e,0)}function st(e,t){var n=it(e);return n.identifier=n.reserved=!0,n.fud=t,n}function ot(e,t){var n=st(e,t);return n.block=!0,n}function ut(e){var t=e.id.charAt(0);if(t>="a"&&t<="z"||t>="A"&&t<="Z")e.identifier=e.reserved=!0;return e}function at(e,t){var n=rt(e,150);return ut(n),n.nud=typeof t=="function"?t:function(){this.right=Y(150),this.arity="unary";if(this.id==="++"||this.id==="--")state.option.plusplus?R("W016",this,this.id):this.right&&(!this.right.identifier||D(this.right))&&this.right.id!=="."&&this.right.id!=="["&&R("W017",this);return this},n}function ft(e,t){var n=it(e);return n.type=e,n.nud=t,n}function lt(e,t){var n=ft(e,t);return n.identifier=!0,n.reserved=!0,n}function ct(e,t){var n=ft(e,t&&t.nud||function(){return this});return t=t||{},t.isFutureReservedWord=!0,n.value=e,n.identifier=!0,n.reserved=!0,n.meta=t,n}function ht(e,t){return lt(e,function(){return typeof t=="function"&&t(this),this})}function pt(e,t,n,r){var i=rt(e,n);return ut(i),i.infix=!0,i.led=function(i){return r||Z(state.tokens.prev,state.tokens.curr),e==="in"&&i.id==="!"&&R("W018",i,"!"),typeof t=="function"?t(i,this):(this.left=i,this.right=Y(n),this)},i}function dt(e){var t=rt(e,42);return t.led=function(e){return state.option.esnext||R("W119",state.tokens.curr,"arrow function syntax (=>)"),Z(state.tokens.prev,state.tokens.curr),this.left=e,this.right=qt(undefined,undefined,!1,e),this},t}function vt(e,t){var n=rt(e,100);return n.led=function(e){Z(state.tokens.prev,state.tokens.curr);var n=Y(100);return M(e,"NaN")||M(n,"NaN")?R("W019",this):t&&t.apply(this,[e,n]),(!e||!n)&&F("E041",state.tokens.curr.line),e.id==="!"&&R("W018",e,"!"),n.id==="!"&&R("W018",n,"!"),this.left=e,this.right=n,this},n}function mt(e){return e&&(e.type==="(number)"&&+e.value===0||e.type==="(string)"&&e.value===""||e.type==="null"&&!state.option.eqnull||e.type==="true"||e.type==="false"||e.type==="undefined")}function gt(e,t){if(state.option.notypeof)return!1;if(!e||!t)return!1;var n=["undefined","object","boolean","number","string","function","xml","object","unknown"];return t.type==="(identifier)"&&t.value==="typeof"&&e.type==="(string)"?!_.contains(n,e.value):!1}function yt(e){function n(e){if(typeof e!="object")return;return e.right==="prototype"?e:n(e.left)}function r(e){while(!e.identifier&&typeof e.left=="object")e=e.left;if(e.identifier&&t.indexOf(e.value)>=0)return e.value}var t=["Array","ArrayBuffer","Boolean","Collator","DataView","Date","DateTimeFormat","Error","EvalError","Float32Array","Float64Array","Function","Infinity","Intl","Int16Array","Int32Array","Int8Array","Iterator","Number","NumberFormat","Object","RangeError","ReferenceError","RegExp","StopIteration","String","SyntaxError","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError"],i=n(e);if(i)return r(i)}function bt(e,t,n){var r=pt(e,typeof t=="function"?t:function(e,t){t.left=e;if(e){if(state.option.freeze){var n=yt(e);n&&R("W121",e,n)}S[e.value]===!1&&x[e.value]["(global)"]===!0?R("W020",e):e["function"]&&R("W021",e,e.value),c[e.value]==="const"&&z("E013",e,e.value);if(e.id===".")return e.left?e.left.value==="arguments"&&!state.directive["use strict"]&&R("E031",t):R("E031",t),t.right=Y(10),t;if(e.id==="[")return state.tokens.curr.left.first?state.tokens.curr.left.first.forEach(function(e){e&&c[e.value]==="const"&&z("E013",e,e.value)}):e.left?e.left.value==="arguments"&&!state.directive["use strict"]&&R("E031",t):R("E031",t),t.right=Y(10),t;if(e.identifier&&!D(e))return c[e.value]==="exception"&&R("W022",e),t.right=Y(10),t;e===state.syntax["function"]&&R("W023",state.tokens.curr)}z("E031",t)},n);return r.exps=!0,r.assign=!0,r}function wt(e,t,n){var r=rt(e,n);return ut(r),r.led=typeof t=="function"?t:function(e){return state.option.bitwise&&R("W016",this,this.id),this.left=e,this.right=Y(n),this},r}function Et(e){return bt(e,function(e,t){state.option.bitwise&&R("W016",t,t.id);if(e)return e.id==="."||e.id==="["||e.identifier&&!D(e)?(Y(10),t):(e===state.syntax["function"]&&R("W023",state.tokens.curr),t);z("E031",t)},20)}function St(e){var t=rt(e,150);return t.led=function(e){return state.option.plusplus?R("W016",this,this.id):(!e.identifier||D(e))&&e.id!=="."&&e.id!=="["&&R("W017",this),this.left=e,this},t}function xt(e,t){if(!state.tokens.next.identifier)return;K();var n=state.tokens.curr,r=state.tokens.curr.value;return D(n)?t&&state.option.inES5()?r:e&&r==="undefined"?r:(R("W024",state.tokens.curr,state.tokens.curr.id),r):r}function Tt(e,t){var n=xt(e,t);if(n)return n;state.tokens.curr.id==="function"&&state.tokens.next.id==="("?R("W025"):z("E030",state.tokens.next,state.tokens.next.value)}function Nt(e){var t=0,n;if(state.tokens.next.id!==";"||E)return;for(;;){do n=J(t),t+=1;while(n.id!="(end)"&&n.id==="(comment)");if(n.reach)return;if(n.id!=="(endline)"){if(n.id==="function"){state.option.latedef===!0&&R("W026",n);break}R("W027",n,n.value,e);break}}}function Ct(){state.tokens.next.id!==";"?state.option.asi||(!state.option.lastsemic||state.tokens.next.id!=="}"||state.tokens.next.line!==state.tokens.curr.line)&&U("W033",state.tokens.curr.line,state.tokens.curr.character):K(";")}function kt(){var e,t=m,n,r=x,i=state.tokens.next;if(i.id===";"){K(";");return}var s=D(i);s&&i.meta&&i.meta.isFutureReservedWord&&J().id===":"&&(R("W024",i,i.id),s=!1);if(i.value==="module"&&i.type==="(identifier)"&&J().type==="(identifier)"){state.option.inESNext()||R("W119",state.tokens.curr,"module"),K("module");var o=Tt();V(o,{type:"unused",token:state.tokens.curr}),K("from"),K("(string)"),Ct();return}if(_.has(["[","{"],i.value)&&Gt().isDestAssign){state.option.inESNext()||R("W104",state.tokens.curr,"destructuring expression"),e=Wt(),e.forEach(function(e){I(c,"W117",e.token,e.id)}),K("="),Xt(e,Y(10,!0)),K(";");return}i.identifier&&!s&&J().id===":"&&(K(),K(":"),x=Object.create(r),V(i.value,{type:"label"}),!state.tokens.next.labelled&&state.tokens.next.value!=="{"&&R("W028",state.tokens.next,i.value,state.tokens.next.value),state.tokens.next.label=i.value,i=state.tokens.next);if(i.id==="{"){var u=c["(verb)"]==="case"&&state.tokens.curr.value===":";Ot(!0,!0,!1,!1,u);return}return n=Y(0,!0),n&&(!n.identifier||n.value!=="function")&&n.type!=="(punctuator)"&&!state.directive["use strict"]&&state.option.globalstrict&&state.option.strict&&R("E007"),i.block||(!state.option.expr&&(!n||!n.exps)?R("W030",state.tokens.curr):state.option.nonew&&n&&n.left&&n.id==="("&&n.left.id==="new"&&R("W031",i),Ct()),m=t,x=r,n}function Lt(e){var t=[],n;while(!state.tokens.next.reach&&state.tokens.next.id!=="(end)")state.tokens.next.id===";"?(n=J(),(!n||n.id!=="("&&n.id!=="[")&&R("W032"),K(";")):t.push(kt(e===state.tokens.next.line));return t}function At(){var e,t,n;for(;;){if(state.tokens.next.id==="(string)"){t=J(0);if(t.id==="(endline)"){e=1;do n=J(e),e+=1;while(n.id==="(endline)");if(n.id!==";"){if(n.id!=="(string)"&&n.id!=="(number)"&&n.id!=="(regexp)"&&n.identifier!==!0&&n.id!=="}")break;R("W033",state.tokens.next)}else t=n}else if(t.id==="}")R("W033",t);else if(t.id!==";")break;K(),state.directive[state.tokens.curr.value]&&R("W034",state.tokens.curr,state.tokens.curr.value),state.tokens.curr.value==="use strict"&&(state.option["(explicitNewcap)"]||(state.option.newcap=!0),state.option.undef=!0),state.directive[state.tokens.curr.value]=!0,t.id===";"&&K(";");continue}break}}function Ot(e,t,n,r,i){var s,o=v,u=m,a,f=x,l,h,p;v=e;if(!e||!state.option.funcscope)x=Object.create(x);l=state.tokens.next;var d=c["(metrics)"];d.nestedBlockDepth+=1,d.verifyMaxNestedBlockDepthPerFunction();if(state.tokens.next.id==="{"){K("{"),c["(blockscope)"].stack(),h=state.tokens.curr.line;if(state.tokens.next.id!=="}"){m+=state.option.indent;while(!e&&state.tokens.next.from>m)m+=state.option.indent;if(n){a={};for(p in state.directive)_.has(state.directive,p)&&(a[p]=state.directive[p]);At(),state.option.strict&&c["(context)"]["(global)"]&&!a["use strict"]&&!state.directive["use strict"]&&R("E007")}s=Lt(h),d.statementCount+=s.length,n&&(state.directive=a),m-=state.option.indent}K("}",l),c["(blockscope)"].unstack(),m=u}else if(!e)if(n){a={},t&&!r&&!state.option.inMoz(!0)&&z("W118",state.tokens.curr,"function closure expressions");if(!t)for(p in state.directive)_.has(state.directive,p)&&(a[p]=state.directive[p]);Y(10),state.option.strict&&c["(context)"]["(global)"]&&!a["use strict"]&&!state.directive["use strict"]&&R("E007")}else z("E021",state.tokens.next,"{",state.tokens.next.value);else c["(nolet)"]=!0,(!t||state.option.curly)&&R("W116",state.tokens.next,"{",state.tokens.next.value),E=!0,m+=state.option.indent,s=[kt()],m-=state.option.indent,E=!1,delete c["(nolet)"];switch(c["(verb)"]){case"break":case"continue":case"return":case"throw":if(i)break;default:c["(verb)"]=null}if(!e||!state.option.funcscope)x=f;return v=o,e&&state.option.noempty&&(!s||s.length===0)&&R("W035"),d.nestedBlockDepth-=1,s}function Mt(e){w&&typeof w[e]!="boolean"&&R("W036",state.tokens.curr,e),typeof b[e]=="number"?b[e]+=1:b[e]=1}function _t(e){var t=e.value,n=Object.getOwnPropertyDescriptor(d,t);n?n.value.push(e.line):d[t]=[e.line]}function Pt(){var e={};e.exps=!0,c["(comparray)"].stack();var t=!1;return state.tokens.next.value!=="for"&&(t=!0,state.option.inMoz(!0)||R("W116",state.tokens.next,"for",state.tokens.next.value),c["(comparray)"].setState("use"),e.right=Y(10)),K("for"),state.tokens.next.value==="each"&&(K("each"),state.option.inMoz(!0)||R("W118",state.tokens.curr,"for each")),K("("),c["(comparray)"].setState("define"),e.left=Y(130),_.contains(["in","of"],state.tokens.next.value)?K():z("E045",state.tokens.curr),c["(comparray)"].setState("generate"),Y(10),K(")"),state.tokens.next.value==="if"&&(K("if"),K("("),c["(comparray)"].setState("filter"),e.filter=Y(10),K(")")),t||(c["(comparray)"].setState("use"),e.right=Y(10)),K("]"),c["(comparray)"].unstack(),e}function Ht(){var e=xt(!1,!0);return e||(state.tokens.next.id==="(string)"?(e=state.tokens.next.value,K()):state.tokens.next.id==="(number)"&&(e=state.tokens.next.value.toString(),K())),e==="hasOwnProperty"&&R("W001"),e}function Bt(e){var t,n,r=[],i,s=[],o,u=!1;if(e){if(Array.isArray(e)){for(var a in e){t=e[a];if(t.value==="..."){state.option.inESNext()||R("W104",t,"spread/rest operator");continue}t.value!==","&&(r.push(t.value),V(t.value,{type:"unused",token:t}))}return r}if(e.identifier===!0)return V(e.value,{type:"unused",token:e}),[e]}n=state.tokens.next,K("(");if(state.tokens.next.id===")"){K(")");return}for(;;){if(_.contains(["{","["],state.tokens.next.id)){s=Wt();for(o in s)o=s[o],o.id&&(r.push(o.id),V(o.id,{type:"unused",token:o.token}))}else state.tokens.next.value==="..."?(state.option.inESNext()||R("W104",state.tokens.next,"spread/rest operator"),K("..."),i=Tt(!0),r.push(i),V(i,{type:"unused",token:state.tokens.curr})):(i=Tt(!0),r.push(i),V(i,{type:"unused",token:state.tokens.curr}));u&&state.tokens.next.id!=="="&&z("E051",state.tokens.current),state.tokens.next.id==="="&&(state.option.inESNext()||R("W119",state.tokens.next,"default parameters"),K("="),u=!0,Y(10));if(state.tokens.next.id!==",")return K(")",n),r;nt()}}function jt(e,t,n){e["(properties)"][t]||(e["(properties)"][t]={unused:!1}),_.extend(e["(properties)"][t],n)}function Ft(e,t,n){return e["(properties)"][t]?e["(properties)"][t][n]||null:null}function It(e,t,n,r){var i={"(name)":e,"(breakage)":0,"(loopage)":0,"(scope)":n,"(tokens)":{},"(properties)":{},"(catch)":!1,"(global)":!1,"(line)":null,"(character)":null,"(metrics)":null,"(statement)":null,"(context)":null,"(blockscope)":null,"(comparray)":null,"(generator)":null,"(params)":null};return t&&_.extend(i,{"(line)":t.line,"(character)":t.character,"(metrics)":Rt(t)}),_.extend(i,r),i["(context)"]&&(i["(blockscope)"]=i["(context)"]["(blockscope)"],i["(comparray)"]=i["(context)"]["(comparray)"]),i}function qt(t,n,r,i){var s,o=state.option,u=state.ignored,a=x;return state.option=Object.create(state.option),state.ignored=Object.create(state.ignored),x=Object.create(x),c=It(t||'"'+e+'"',state.tokens.next,x,{"(statement)":n,"(context)":c,"(generator)":r?!0:null}),s=c,state.tokens.curr.funct=c,h.push(c),t&&V(t,{type:"function"}),c["(params)"]=Bt(i),c["(metrics)"].verifyMaxParametersPerFunction(c["(params)"]),JSHINT.undefs=_.filter(JSHINT.undefs,function(e){return!_.contains(_.union(i),e[2])}),Ot(!1,!0,!0,i?!0:!1),!state.option.noyield&&r&&c["(generator)"]!=="yielded"&&R("W124",state.tokens.curr),c["(metrics)"].verifyMaxStatementsPerFunction(),c["(metrics)"].verifyMaxComplexityPerFunction(),c["(unusedOption)"]=state.option.unused,x=a,state.option=o,state.ignored=u,c["(last)"]=state.tokens.curr.line,c["(lastcharacter)"]=state.tokens.curr.character,_.map(Object.keys(c),function(e){if(e[0]==="(")return;c["(blockscope)"].unshadow(e)}),c=c["(context)"],s}function Rt(e){return{statementCount:0,nestedBlockDepth:-1,ComplexityCount:1,verifyMaxStatementsPerFunction:function(){state.option.maxstatements&&this.statementCount>state.option.maxstatements&&R("W071",e,this.statementCount)},verifyMaxParametersPerFunction:function(t){t=t||[],state.option.maxparams&&t.length>state.option.maxparams&&R("W072",e,t.length)},verifyMaxNestedBlockDepthPerFunction:function(){state.option.maxdepth&&this.nestedBlockDepth>0&&this.nestedBlockDepth===state.option.maxdepth+1&&R("W073",null,this.nestedBlockDepth)},verifyMaxComplexityPerFunction:function(){var t=state.option.maxcomplexity,n=this.ComplexityCount;t&&n>t&&R("W074",e,n)}}}function Ut(){c["(metrics)"].ComplexityCount+=1}function zt(e){var t,n;e&&(t=e.id,n=e.paren,t===","&&(e=e.exprs[e.exprs.length-1])&&(t=e.id,n=n||e.paren));switch(t){case"=":case"+=":case"-=":case"*=":case"%=":case"&=":case"|=":case"^=":case"/=":!n&&!state.option.boss&&R("W084")}}function Wt(){var e,t,n=[];state.option.inESNext()||R("W104",state.tokens.curr,"destructuring expression");var r=function(){var e;if(_.contains(["[","{"],state.tokens.next.value)){t=Wt();for(var i in t)i=t[i],n.push({id:i.id,token:i.token})}else state.tokens.next.value===","?n.push({id:null,token:state.tokens.curr}):state.tokens.next.value==="("?(K("("),r(),K(")")):(e=Tt(),e&&n.push({id:e,token:state.tokens.curr}))};if(state.tokens.next.value==="["){K("["),r();while(state.tokens.next.value!=="]")K(","),r();K("]")}else if(state.tokens.next.value==="{"){K("{"),e=Tt(),state.tokens.next.value===":"?(K(":"),r()):n.push({id:e,token:state.tokens.curr});while(state.tokens.next.value!=="}")K(","),e=Tt(),state.tokens.next.value===":"?(K(":"),r()):n.push({id:e,token:state.tokens.curr});K("}")}return n}function Xt(e,t){var n=t.first;if(!n)return;_.zip(e,Array.isArray(n)?n:[n]).forEach(function(e){var t=e[0],n=e[1];t&&n?t.first=n:t&&t.first&&!n&&R("W080",t.first,t.first.value)})}function Kt(e){return state.option.inESNext()||R("W104",state.tokens.curr,"class"),e?(this.name=Tt(),V(this.name,{type:"unused",token:state.tokens.curr})):state.tokens.next.identifier&&state.tokens.next.value!=="extends"&&(this.name=Tt()),Qt(this),this}function Qt(e){var t=state.directive["use strict"];state.tokens.next.value==="extends"&&(K("extends"),e.heritage=Y(10)),state.directive["use strict"]=!0,K("{"),e.body=state.syntax["{"].nud(!0),state.directive["use strict"]=t}function Yt(){var e=Gt();e.notJson?(!state.option.inESNext()&&e.isDestAssign&&R("W104",state.tokens.curr,"destructuring assignment"),Lt()):(state.option.laxbreak=!0,state.jsonMode=!0,en())}function en(){function e(){var e={},t=state.tokens.next;K("{");if(state.tokens.next.id!=="}")for(;;){if(state.tokens.next.id==="(end)")z("E026",state.tokens.next,t.line);else{if(state.tokens.next.id==="}"){R("W094",state.tokens.curr);break}state.tokens.next.id===","?z("E028",state.tokens.next):state.tokens.next.id!=="(string)"&&R("W095",state.tokens.next,state.tokens.next.value)}e[state.tokens.next.value]===!0?R("W075",state.tokens.next,state.tokens.next.value):state.tokens.next.value==="__proto__"&&!state.option.proto||state.tokens.next.value==="__iterator__"&&!state.option.iterator?R("W096",state.tokens.next,state.tokens.next.value):e[state.tokens.next.value]=!0,K(),K(":"),en();if(state.tokens.next.id!==",")break;K(",")}K("}")}function t(){var e=state.tokens.next;K("[");if(state.tokens.next.id!=="]")for(;;){if(state.tokens.next.id==="(end)")z("E027",state.tokens.next,e.line);else{if(state.tokens.next.id==="]"){R("W094",state.tokens.curr);break}state.tokens.next.id===","&&z("E028",state.tokens.next)}en();if(state.tokens.next.id!==",")break;K(",")}K("]")}switch(state.tokens.next.id){case"{":e();break;case"[":t();break;case"true":case"false":case"null":case"(number)":case"(string)":K();break;case"-":K("-"),K("(number)");break;default:z("E003",state.tokens.next)}}var e,t,n={"<":!0,"<=":!0,"==":!0,"===":!0,"!==":!0,"!=":!0,">":!0,">=":!0,"+":!0,"-":!0,"*":!0,"/":!0,"%":!0},r={enforcing:{bitwise:!0,freeze:!0,camelcase:!0,curly:!0,dojo:!0,eqeqeq:!0,eqnull:!0,notypeof:!0,es3:!0,es5:!0,esnext:!0,expr:!0,forin:!0,funcscope:!0,globalstrict:!0,immed:!0,iterator:!0,lastsemic:!0,loopfunc:!0,newcap:!0,noarg:!0,noempty:!0,nonbsp:!0,nonew:!0,undef:!0,enforceall:!1},relaxing:{asi:!0,multistr:!0,debug:!0,boss:!0,phantom:!0,evil:!0,plusplus:!0,proto:!0,typed:!0,scripturl:!0,strict:!0,sub:!0,supernew:!0,laxbreak:!0,laxcomma:!0,validthis:!0,withstmt:!0,moz:!0,noyield:!0},mootools:!0,couch:!0,jasmine:!0,jquery:!0,node:!0,qunit:!0,rhino:!0,shelljs:!0,prototypejs:!0,yui:!0,mocha:!0,wsh:!0,worker:!0,nonstandard:!0,browser:!0,devel:!0,onecase:!0,regexp:!0,regexdash:!0},i={maxlen:!1,indent:!1,maxerr:!1,predef:!1,globals:!1,quotmark:!1,scope:!1,maxstatements:!1,maxdepth:!1,maxparams:!1,maxcomplexity:!1,shadow:!1,unused:!0,latedef:!1,ignore:!1},s={bitwise:!0,forin:!0,newcap:!0,plusplus:!0,regexp:!0,undef:!0,eqeqeq:!0,strict:!0},o={eqeq:"eqeqeq",windows:"wsh",sloppy:"strict"},u={nomen:!0,onevar:!0,passfail:!0,white:!0,gcl:!0,smarttabs:!0,trailing:!0},a,f,l=["closure","exception","global","label","outer","unused","var"],c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k=[],L=new events.EventEmitter;ft("(number)",function(){return this}),ft("(string)",function(){return this}),ft("(template)",function(){return this}),state.syntax["(identifier)"]={type:"(identifier)",lbp:0,identifier:!0,nud:function(){var t=this.value,n=x[t],r,i;typeof n=="function"?n=undefined:!c["(blockscope)"].current.has(t)&&typeof n=="boolean"&&(r=c,c=h[0],V(t,{type:"var"}),n=c,c=r),i=c["(blockscope)"].getlabel(t);if(c===n||i)switch(i?i[t]["(type)"]:c[t]){case"unused":i?i[t]["(type)"]="var":c[t]="var";break;case"unction":i?i[t]["(type)"]="function":c[t]="function",this["function"]=!0;break;case"const":jt(c,t,{unused:!1});break;case"function":this["function"]=!0;break;case"label":R("W037",state.tokens.curr,t)}else if(c["(global)"])typeof S[t]!="boolean"&&(e!=="typeof"&&e!=="delete"||state.tokens.next&&(state.tokens.next.value==="."||state.tokens.next.value==="["))&&(c["(comparray)"].check(t)||I(c,"W117",state.tokens.curr,t)),_t(state.tokens.curr);else switch(c[t]){case"closure":case"function":case"var":case"unused":R("W038",state.tokens.curr,t);break;case"label":R("W037",state.tokens.curr,t);break;case"outer":case"global":break;default:if(n===!0)c[t]=!0;else if(n===null)R("W039",state.tokens.curr,t),_t(state.tokens.curr);else if(typeof n!="object")(e!=="typeof"&&e!=="delete"||state.tokens.next&&(state.tokens.next.value==="."||state.tokens.next.value==="["))&&I(c,"W117",state.tokens.curr,t),c[t]=!0,_t(state.tokens.curr);else switch(n[t]){case"function":case"unction":this["function"]=!0,n[t]="closure",c[t]=n["(global)"]?"global":"outer";break;case"var":case"unused":n[t]="closure",c[t]=n["(global)"]?"global":"outer";break;case"const":jt(n,t,{unused:!1});break;case"closure":c[t]=n["(global)"]?"global":"outer";break;case"label":R("W037",state.tokens.curr,t)}}return this},led:function(){z("E033",state.tokens.next,state.tokens.next.value)}},ft("(regexp)",function(){return this}),it("(endline)"),it("(begin)"),it("(end)").reach=!0,it("(error)").reach=!0,it("}").reach=!0,it(")"),it("]"),it('"').reach=!0,it("'").reach=!0,it(";"),it(":").reach=!0,it("#"),lt("else"),lt("case").reach=!0,lt("catch"),lt("default").reach=!0,lt("finally"),ht("arguments",function(e){state.directive["use strict"]&&c["(global)"]&&R("E008",e)}),ht("eval"),ht("false"),ht("Infinity"),ht("null"),ht("this",function(e){state.directive["use strict"]&&!state.option.validthis&&(c["(statement)"]&&c["(name)"].charAt(0)>"Z"||c["(global)"])&&R("W040",e)}),ht("true"),ht("undefined"),bt("=","assign",20),bt("+=","assignadd",20),bt("-=","assignsub",20),bt("*=","assignmult",20),bt("/=","assigndiv",20).nud=function(){z("E014")},bt("%=","assignmod",20),Et("&=","assignbitand",20),Et("|=","assignbitor",20),Et("^=","assignbitxor",20),Et("<<=","assignshiftleft",20),Et(">>=","assignshiftright",20),Et(">>>=","assignshiftrightunsigned",20),pt(",",function(e,t){var n;t.exprs=[e];if(!nt({peek:!0}))return t;for(;;){if(!(n=Y(10)))break;t.exprs.push(n);if(state.tokens.next.value!==","||!nt())break}return t},10,!0),pt("?",function(e,t){return Ut(),t.left=e,t.right=Y(10),K(":"),t["else"]=Y(10),t},30);var Dt=40;pt("||",function(e,t){return Ut(),t.left=e,t.right=Y(Dt),t},Dt),pt("&&","and",50),wt("|","bitor",70),wt("^","bitxor",80),wt("&","bitand",90),vt("==",function(e,t){var n=state.option.eqnull&&(e.value==="null"||t.value==="null");switch(!0){case!n&&state.option.eqeqeq:this.from=this.character,R("W116",this,"===","==");break;case mt(e):R("W041",this,"===",e.value);break;case mt(t):R("W041",this,"===",t.value);break;case gt(t,e):R("W122",this,t.value);break;case gt(e,t):R("W122",this,e.value)}return this}),vt("===",function(e,t){return gt(t,e)?R("W122",this,t.value):gt(e,t)&&R("W122",this,e.value),this}),vt("!=",function(e,t){var n=state.option.eqnull&&(e.value==="null"||t.value==="null");return!n&&state.option.eqeqeq?(this.from=this.character,R("W116",this,"!==","!=")):mt(e)?R("W041",this,"!==",e.value):mt(t)?R("W041",this,"!==",t.value):gt(t,e)?R("W122",this,t.value):gt(e,t)&&R("W122",this,e.value),this}),vt("!==",function(e,t){return gt(t,e)?R("W122",this,t.value):gt(e,t)&&R("W122",this,e.value),this}),vt("<"),vt(">"),vt("<="),vt(">="),wt("<<","shiftleft",120),wt(">>","shiftright",120),wt(">>>","shiftrightunsigned",120),pt("in","in",120),pt("instanceof","instanceof",120),pt("+",function(e,t){var n=Y(130);return e&&n&&e.id==="(string)"&&n.id==="(string)"?(e.value+=n.value,e.character=n.character,!state.option.scripturl&&reg.javascriptURL.test(e.value)&&R("W050",e),e):(t.left=e,t.right=n,t)},130),at("+","num"),at("+++",function(){return R("W007"),this.right=Y(150),this.arity="unary",this}),pt("+++",function(e){return R("W007"),this.left=e,this.right=Y(130),this},130),pt("-","sub",130),at("-","neg"),at("---",function(){return R("W006"),this.right=Y(150),this.arity="unary",this}),pt("---",function(e){return R("W006"),this.left=e,this.right=Y(130),this},130),pt("*","mult",140),pt("/","div",140),pt("%","mod",140),St("++","postinc"),at("++","preinc"),state.syntax["++"].exps=!0,St("--","postdec"),at("--","predec"),state.syntax["--"].exps=!0,at("delete",function(){var e=Y(10);return(!e||e.id!=="."&&e.id!=="[")&&R("W051"),this.first=e,this}).exps=!0,at("~",function(){return state.option.bitwise&&R("W052",this,"~"),Y(150),this}),at("...",function(){return state.option.inESNext()||R("W104",this,"spread/rest operator"),state.tokens.next.identifier||z("E030",state.tokens.next,state.tokens.next.value),Y(150),this}),at("!",function(){return this.right=Y(150),this.arity="unary",this.right||F("E041",this.line||0),n[this.right.id]===!0&&R("W018",this,"!"),this}),at("typeof","typeof"),at("new",function(){var e=Y(155),t;if(e&&e.id!=="function")if(e.identifier){e["new"]=!0;switch(e.value){case"Number":case"String":case"Boolean":case"Math":case"JSON":R("W053",state.tokens.prev,e.value);break;case"Function":state.option.evil||R("W054");break;case"Date":case"RegExp":case"this":break;default:e.id!=="function"&&(t=e.value.substr(0,1),state.option.newcap&&(t<"A"||t>"Z")&&!_.has(p,e.value)&&R("W055",state.tokens.curr))}}else e.id!=="."&&e.id!=="["&&e.id!=="("&&R("W056",state.tokens.curr);else state.option.supernew||R("W057",this);return state.tokens.next.id!=="("&&!state.option.supernew&&R("W058",state.tokens.curr,state.tokens.curr.value),this.first=e,this}),state.syntax["new"].exps=!0,at("void").exps=!0,pt(".",function(e,t){var n=Tt(!1,!0);return typeof n=="string"&&Mt(n),t.left=e,t.right=n,n&&n==="hasOwnProperty"&&state.tokens.next.value==="="&&R("W001"),!e||e.value!=="arguments"||n!=="callee"&&n!=="caller"?!state.option.evil&&e&&e.value==="document"&&(n==="write"||n==="writeln")&&R("W060",e):state.option.noarg?R("W059",e,n):state.directive["use strict"]&&z("E008"),!state.option.evil&&(n==="eval"||n==="execScript")&&R("W061"),t},160,!0),pt("(",function(e,t){state.option.immed&&e&&!e.immed&&e.id==="function"&&R("W062");var n=0,r=[];e&&e.type==="(identifier)"&&e.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)&&"Number String Boolean Date Object Error".indexOf(e.value)===-1&&(e.value==="Math"?R("W063",e):state.option.newcap&&R("W064",e));if(state.tokens.next.id!==")")for(;;){r[r.length]=Y(10),n+=1;if(state.tokens.next.id!==",")break;nt()}return K(")"),typeof e=="object"&&(state.option.inES3()&&e.value==="parseInt"&&n===1&&R("W065",state.tokens.curr),state.option.evil||(e.value==="eval"||e.value==="Function"||e.value==="execScript"?(R("W061",e),r[0]&&[0].id==="(string)"&&X(e,r[0].value)):!r[0]||r[0].id!=="(string)"||e.value!=="setTimeout"&&e.value!=="setInterval"?r[0]&&r[0].id==="(string)"&&e.value==="."&&e.left.value==="window"&&(e.right==="setTimeout"||e.right==="setInterval")&&(R("W066",e),X(e,r[0].value)):(R("W066",e),X(e,r[0].value))),!e.identifier&&e.id!=="."&&e.id!=="["&&e.id!=="("&&e.id!=="&&"&&e.id!=="||"&&e.id!=="?"&&(!state.option.esnext||e.id!=="=>")&&R("W067",e)),t.left=e,t},155,!0).exps=!0,at("(",function(){var e,t=[],n,r,i=0,s,o=1;do n=J(i),n.value==="("?o+=1:n.value===")"&&(o-=1),i+=1,r=J(i);while((o!==0||n.value!==")")&&r.value!=="=>"&&r.value!==";"&&r.type!=="(end)");state.tokens.next.id==="function"&&(state.tokens.next.immed=!0);var u=[];if(state.tokens.next.id!==")")for(;;){if(r.value==="=>"&&_.contains(["{","["],state.tokens.next.value)){e=state.tokens.next,e.left=Wt(),t.push(e);for(var a in e.left)u.push(e.left[a].token)}else u.push(Y(10));if(state.tokens.next.id!==",")break;nt()}K(")",this),state.option.immed&&u[0]&&u[0].id==="function"&&state.tokens.next.id!=="("&&(state.tokens.next.id!=="."||J().value!=="call"&&J().value!=="apply")&&R("W068",this);if(state.tokens.next.value==="=>")return u;if(!u.length)return;return u.length>1?(s=Object.create(state.syntax[","]),s.exprs=u):s=u[0],s&&(s.paren=!0),s}),dt("=>"),pt("[",function(e,t){var n=Y(10),r;return n&&n.type==="(string)"&&(!state.option.evil&&(n.value==="eval"||n.value==="execScript")&&R("W061",t),Mt(n.value),!state.option.sub&&reg.identifier.test(n.value)&&(r=state.syntax[n.value],(!r||!D(r))&&R("W069",state.tokens.prev,n.value))),K("]",t),n&&n.value==="hasOwnProperty"&&state.tokens.next.value==="="&&R("W001"),t.left=e,t.right=n,t},160,!0),at("[",function(){var e=Gt(!0);if(e.isCompArray)return state.option.inESNext()||R("W119",state.tokens.curr,"array comprehension"),Pt();e.isDestAssign&&!state.option.inESNext()&&R("W104",state.tokens.curr,"destructuring assignment");var t=state.tokens.curr.line!==state.tokens.next.line;this.first=[],t&&(m+=state.option.indent,state.tokens.next.from===m+state.option.indent&&(m+=state.option.indent));while(state.tokens.next.id!=="(end)"){while(state.tokens.next.id===",")state.option.inES5()||R("W070"),K(",");if(state.tokens.next.id==="]")break;this.first.push(Y(10));if(state.tokens.next.id!==",")break;nt({allowTrailing:!0});if(state.tokens.next.id==="]"&&!state.option.inES5(!0)){R("W070",state.tokens.curr);break}}return t&&(m-=state.option.indent),K("]",this),this},160),function(e){e.nud=function(e){function f(e,t){u[e]&&_.has(u,e)?R("W075",state.tokens.next,r):u[e]={},u[e].basic=!0,u[e].basictkn=t}function l(e,t){u[e]&&_.has(u,e)?(u[e].basic||u[e].setter)&&R("W075",state.tokens.next,r):u[e]={},u[e].setter=!0,u[e].setterToken=t}function c(e){u[e]&&_.has(u,e)?(u[e].basic||u[e].getter)&&R("W075",state.tokens.next,r):u[e]={},u[e].getter=!0,u[e].getterToken=state.tokens.curr}var t,n,r,i,s,o,u={},a="";t=state.tokens.curr.line!==state.tokens.next.line,t&&(m+=state.option.indent,state.tokens.next.from===m+state.option.indent&&(m+=state.option.indent));for(;;){if(state.tokens.next.id==="}")break;e&&state.tokens.next.value==="static"&&(K("static"),a="static ");if(state.tokens.next.value==="get"&&J().id!==":")K("get"),state.option.inES5(!e)||z("E034"),r=Ht(),!r&&!state.option.inESNext()&&z("E035"),e&&r==="constructor"&&z("E049",state.tokens.next,"class getter method",r),r&&c(a+r),s=state.tokens.next,n=qt(),i=n["(params)"],r&&i&&R("W076",s,i[0],r);else if(state.tokens.next.value==="set"&&J().id!==":")K("set"),state.option.inES5(!e)||z("E034"),r=Ht(),!r&&!state.option.inESNext()&&z("E035"),e&&r==="constructor"&&z("E049",state.tokens.next,"class setter method",r),r&&l(a+r,state.tokens.next),s=state.tokens.next,n=qt(),i=n["(params)"],r&&(!i||i.length!==1)&&R("W077",s,r);else{o=!1,state.tokens.next.value==="*"&&state.tokens.next.type==="(punctuator)"&&(state.option.inESNext()||R("W104",state.tokens.next,"generator functions"),K("*"),o=!0),r=Ht(),f(a+r,state.tokens.next);if(typeof r!="string")break;state.tokens.next.value==="("?(state.option.inESNext()||R("W104",state.tokens.curr,"concise methods"),qt(r,undefined,o)):e||(K(":"),Y(10))}e&&r==="prototype"&&z("E049",state.tokens.next,"class method",r),Mt(r);if(e){a="";continue}if(state.tokens.next.id!==",")break;nt({allowTrailing:!0,property:!0}),state.tokens.next.id===","?R("W070",state.tokens.curr):state.tokens.next.id==="}"&&!state.option.inES5(!0)&&R("W070",state.tokens.curr)}t&&(m-=state.option.indent),K("}",this);if(state.option.inES5())for(var h in u)_.has(u,h)&&u[h].setter&&!u[h].getter&&R("W078",u[h].setterToken);return this},e.fud=function(){z("E036",state.tokens.curr)}}(it("{"));var Vt=st("const",function(e){var t,n,r;state.option.inESNext()||R("W104",state.tokens.curr,"const"),this.first=[];for(;;){var i=[];_.contains(["{","["],state.tokens.next.value)?(t=Wt(),r=!1):(t=[{id:Tt(),token:state.tokens.curr}],r=!0);for(var s in t)t.hasOwnProperty(s)&&(s=t[s],c[s.id]==="const"&&R("E011",null,s.id),c["(global)"]&&S[s.id]===!1&&R("W079",s.token,s.id),s.id&&(V(s.id,{token:s.token,type:"const",unused:!0}),i.push(s.token)));if(e)break;this.first=this.first.concat(i),state.tokens.next.id!=="="&&R("E012",state.tokens.curr,state.tokens.curr.value),state.tokens.next.id==="="&&(K("="),state.tokens.next.id==="undefined"&&R("W080",state.tokens.prev,state.tokens.prev.value),J(0).id==="="&&state.tokens.next.identifier&&R("W120",state.tokens.next,state.tokens.next.value),n=Y(10),r?t[0].first=n:Xt(i,n));if(state.tokens.next.id!==",")break;nt()}return this});Vt.exps=!0;var $t=st("var",function(e){var t,n,r;this.first=[];for(;;){var i=[];_.contains(["{","["],state.tokens.next.value)?(t=Wt(),n=!1):(t=[{id:Tt(),token:state.tokens.curr}],n=!0);for(var s in t)t.hasOwnProperty(s)&&(s=t[s],state.option.inESNext()&&c[s.id]==="const"&&R("E011",null,s.id),c["(global)"]&&S[s.id]===!1&&R("W079",s.token,s.id),s.id&&(V(s.id,{type:"unused",token:s.token}),i.push(s.token)));if(e)break;this.first=this.first.concat(i),state.tokens.next.id==="="&&(K("="),state.tokens.next.id==="undefined"&&R("W080",state.tokens.prev,state.tokens.prev.value),J(0).id==="="&&state.tokens.next.identifier&&R("W120",state.tokens.next,state.tokens.next.value),r=Y(10),n?t[0].first=r:Xt(i,r));if(state.tokens.next.id!==",")break;nt()}return this});$t.exps=!0;var Jt=st("let",function(e){var t,n,r,i;state.option.inESNext()||R("W104",state.tokens.curr,"let"),state.tokens.next.value==="("?(state.option.inMoz(!0)||R("W118",state.tokens.next,"let block"),K("("),c["(blockscope)"].stack(),i=!0):c["(nolet)"]&&z("E048",state.tokens.curr),this.first=[];for(;;){var s=[];_.contains(["{","["],state.tokens.next.value)?(t=Wt(),n=!1):(t=[{id:Tt(),token:state.tokens.curr.value}],n=!0);for(var o in t)t.hasOwnProperty(o)&&(o=t[o],state.option.inESNext()&&c[o.id]==="const"&&R("E011",null,o.id),c["(global)"]&&S[o.id]===!1&&R("W079",o.token,o.id),o.id&&!c["(nolet)"]&&(V(o.id,{type:"unused",token:o.token,islet:!0}),s.push(o.token)));if(e)break;this.first=this.first.concat(s),state.tokens.next.id==="="&&(K("="),state.tokens.next.id==="undefined"&&R("W080",state.tokens.prev,state.tokens.prev.value),J(0).id==="="&&state.tokens.next.identifier&&R("W120",state.tokens.next,state.tokens.next.value),r=Y(10),n?t[0].first=r:Xt(s,r));if(state.tokens.next.id!==",")break;nt()}return i&&(K(")"),Ot(!0,!0),this.block=!0,c["(blockscope)"].unstack()),this});Jt.exps=!0,ot("class",function(){return Kt.call(this,!0)}),ot("function",function(){var e=!1;state.tokens.next.value==="*"&&(K("*"),state.option.inESNext(!0)?e=!0:R("W119",state.tokens.curr,"function*")),v&&R("W082",state.tokens.curr);var t=Tt();return c[t]==="const"&&R("E011",null,t),V(t,{type:"unction",token:state.tokens.curr}),qt(t,{statement:!0},e),state.tokens.next.id==="("&&state.tokens.next.line===state.tokens.curr.line&&z("E039"),this}),at("function",function(){var e=!1;state.tokens.next.value==="*"&&(state.option.inESNext()||R("W119",state.tokens.curr,"function*"),K("*"),e=!0);var t=xt();return qt(t,undefined,e),!state.option.loopfunc&&c["(loopage)"]&&R("W083"),this}),ot("if",function(){var e=state.tokens.next;return Ut(),state.condition=!0,K("("),zt(Y(0)),K(")",e),state.condition=!1,Ot(!0,!0),state.tokens.next.id==="else"&&(K("else"),state.tokens.next.id==="if"||state.tokens.next.id==="switch"?kt(!0):Ot(!0,!0)),this}),ot("try",function(){function t(){var e=x,t;K("catch"),K("("),x=Object.create(e),t=state.tokens.next.value,state.tokens.next.type!=="(identifier)"&&(t=null,R("E030",state.tokens.next,t)),K(),c=It("(catch)",state.tokens.next,x,{"(context)":c,"(breakage)":c["(breakage)"],"(loopage)":c["(loopage)"],"(statement)":!1,"(catch)":!0}),t&&V(t,{type:"exception"}),state.tokens.next.value==="if"&&(state.option.inMoz(!0)||R("W118",state.tokens.curr,"catch filter"),K("if"),Y(0)),K(")"),state.tokens.curr.funct=c,h.push(c),Ot(!1),x=e,c["(last)"]=state.tokens.curr.line,c["(lastcharacter)"]=state.tokens.curr.character,c=c["(context)"]}var e;Ot(!0);while(state.tokens.next.id==="catch")Ut(),e&&!state.option.inMoz(!0)&&R("W118",state.tokens.next,"multiple catch blocks"),t(),e=!0;if(state.tokens.next.id==="finally"){K("finally"),Ot(!0);return}return e||z("E021",state.tokens.next,"catch",state.tokens.next.value),this}),ot("while",function(){var e=state.tokens.next;return c["(breakage)"]+=1,c["(loopage)"]+=1,Ut(),K("("),zt(Y(0)),K(")",e),Ot(!0,!0),c["(breakage)"]-=1,c["(loopage)"]-=1,this}).labelled=!0,ot("with",function(){var e=state.tokens.next;return state.directive["use strict"]?z("E010",state.tokens.curr):state.option.withstmt||R("W085",state.tokens.curr),K("("),Y(0),K(")",e),Ot(!0,!0),this}),ot("switch",function(){var e=state.tokens.next,t=!1,n=!1;c["(breakage)"]+=1,K("("),zt(Y(0)),K(")",e),e=state.tokens.next,K("{"),state.tokens.next.from===m&&(n=!0),n||(m+=state.option.indent),this.cases=[];for(;;)switch(state.tokens.next.id){case"case":switch(c["(verb)"]){case"yield":case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:reg.fallsThrough.test(state.lines[state.tokens.next.line-2])||R("W086",state.tokens.curr,"case")}K("case"),this.cases.push(Y(0)),Ut(),t=!0,K(":"),c["(verb)"]="case";break;case"default":switch(c["(verb)"]){case"yield":case"break":case"continue":case"return":case"throw":break;default:this.cases.length&&(reg.fallsThrough.test(state.lines[state.tokens.next.line-2])||R("W086",state.tokens.curr,"default"))}K("default"),t=!0,K(":");break;case"}":n||(m-=state.option.indent),K("}",e),c["(breakage)"]-=1,c["(verb)"]=undefined;return;case"(end)":z("E023",state.tokens.next,"}");return;default:m+=state.option.indent;if(t)switch(state.tokens.curr.id){case",":z("E040");return;case":":t=!1,Lt();break;default:z("E025",state.tokens.curr);return}else{if(state.tokens.curr.id!==":"){z("E021",state.tokens.next,"case",state.tokens.next.value);return}K(":"),z("E024",state.tokens.curr,":"),Lt()}m-=state.option.indent}}).labelled=!0,st("debugger",function(){return state.option.debug||R("W087",this),this}).exps=!0,function(){var e=st("do",function(){c["(breakage)"]+=1,c["(loopage)"]+=1,Ut(),this.first=Ot(!0,!0),K("while");var e=state.tokens.next;return K("("),zt(Y(0)),K(")",e),c["(breakage)"]-=1,c["(loopage)"]-=1,this});e.labelled=!0,e.exps=!0}(),ot("for",function(){var e,t=state.tokens.next,n=!1,r=null;t.value==="each"&&(r=t,K("each"),state.option.inMoz(!0)||R("W118",state.tokens.curr,"for each")),c["(breakage)"]+=1,c["(loopage)"]+=1,Ut(),K("(");var i,s=0,o=["in","of"];do i=J(s),++s;while(!_.contains(o,i.value)&&i.value!==";"&&i.type!=="(end)");if(_.contains(o,i.value)){!state.option.inESNext()&&i.value==="of"&&z("W104",i,"for of");if(state.tokens.next.id==="var")K("var"),state.syntax["var"].fud.call(state.syntax["var"].fud,!0);else if(state.tokens.next.id==="let")K("let"),n=!0,c["(blockscope)"].stack(),state.syntax.let.fud.call(state.syntax.let.fud,!0);else if(!state.tokens.next.identifier)z("E030",state.tokens.next,state.tokens.next.type),K();else{switch(c[state.tokens.next.value]){case"unused":c[state.tokens.next.value]="var";break;case"var":break;default:c["(blockscope)"].getlabel(state.tokens.next.value)||R("W088",state.tokens.next,state.tokens.next.value)}K()}K(i.value),Y(20),K(")",t),e=Ot(!0,!0),i.value==="in"&&state.option.forin&&e&&(e.length>1||typeof e[0]!="object"||e[0].value!=="if")&&R("W089",this),c["(breakage)"]-=1,c["(loopage)"]-=1}else{r&&z("E045",r);if(state.tokens.next.id!==";")if(state.tokens.next.id==="var")K("var"),state.syntax["var"].fud.call(state.syntax["var"].fud);else if(state.tokens.next.id==="let")K("let"),n=!0,c["(blockscope)"].stack(),state.syntax.let.fud.call(state.syntax.let.fud);else for(;;){Y(0,"for");if(state.tokens.next.id!==",")break;nt()}et(state.tokens.curr),K(";"),state.tokens.next.id!==";"&&zt(Y(0)),et(state.tokens.curr),K(";"),state.tokens.next.id===";"&&z("E021",state.tokens.next,")",";");if(state.tokens.next.id!==")")for(;;){Y(0,"for");if(state.tokens.next.id!==",")break;nt()}K(")",t),Ot(!0,!0),c["(breakage)"]-=1,c["(loopage)"]-=1}return n&&c["(blockscope)"].unstack(),this}).labelled=!0,st("break",function(){var e=state.tokens.next.value;return c["(breakage)"]===0&&R("W052",state.tokens.next,this.value),state.option.asi||et(this),state.tokens.next.id!==";"&&!state.tokens.next.reach&&state.tokens.curr.line===state.tokens.next.line&&(c[e]!=="label"?R("W090",state.tokens.next,e):x[e]!==c&&R("W091",state.tokens.next,e),this.first=state.tokens.next,K()),Nt("break"),this}).exps=!0,st("continue",function(){var e=state.tokens.next.value;return c["(breakage)"]===0&&R("W052",state.tokens.next,this.value),state.option.asi||et(this),state.tokens.next.id!==";"&&!state.tokens.next.reach?state.tokens.curr.line===state.tokens.next.line&&(c[e]!=="label"?R("W090",state.tokens.next,e):x[e]!==c&&R("W091",state.tokens.next,e),this.first=state.tokens.next,K()):c["(loopage)"]||R("W052",state.tokens.next,this.value),Nt("continue"),this}).exps=!0,st("return",function(){return this.line===state.tokens.next.line?state.tokens.next.id!==";"&&!state.tokens.next.reach&&(this.first=Y(0),this.first&&this.first.type==="(punctuator)"&&this.first.value==="="&&!this.first.paren&&!state.option.boss&&U("W093",this.first.line,this.first.character)):state.tokens.next.type==="(punctuator)"&&["[","{","+","-"].indexOf(state.tokens.next.value)>-1&&et(this),Nt("return"),this}).exps=!0,function(e){e.exps=!0,e.lbp=25}(at("yield",function(){var e=state.tokens.prev;return state.option.inESNext(!0)&&!c["(generator)"]?("(catch)"!==c["(name)"]||!c["(context)"]["(generator)"])&&z("E046",state.tokens.curr,"yield"):state.option.inESNext()||R("W104",state.tokens.curr,"yield"),c["(generator)"]="yielded",this.line===state.tokens.next.line||!state.option.inMoz(!0)?(state.tokens.next.id!==";"&&!state.tokens.next.reach&&state.tokens.next.nud&&(Z(state.tokens.curr,state.tokens.next),this.first=Y(10),this.first.type==="(punctuator)"&&this.first.value==="="&&!this.first.paren&&!state.option.boss&&U("W093",this.first.line,this.first.character)),state.option.inMoz(!0)&&state.tokens.next.id!==")"&&(e.lbp>30||!e.assign&&!G()||e.id==="yield")&&z("E050",this)):state.option.asi||et(this),this})),st("throw",function(){return et(this),this.first=Y(20),Nt("throw"),this}).exps=!0,st("import",function(){state.option.inESNext()||R("W119",state.tokens.curr,"import");if(state.tokens.next.type==="(string)")return K("(string)"),this;if(state.tokens.next.identifier)this.name=Tt(),V(this.name,{type:"unused",token:state.tokens.curr});else{K("{");for(;;){if(state.tokens.next.value==="}"){K("}");break}var e;state.tokens.next.type==="default"?(e="default",K("default")):e=Tt(),state.tokens.next.value==="as"&&(K("as"),e=Tt()),V(e,{type:"unused",token:state.tokens.curr});if(state.tokens.next.value!==","){if(state.tokens.next.value==="}"){K("}");break}z("E024",state.tokens.next,state.tokens.next.value);break}K(",")}}return K("from"),K("(string)"),this}).exps=!0,st("export",function(){state.option.inESNext()||R("W119",state.tokens.curr,"export");if(state.tokens.next.value==="*")return K("*"),K("from"),K("(string)"),this;if(state.tokens.next.type==="default"){K("default");if(state.tokens.next.id==="function"||state.tokens.next.id==="class")this.block=!0;return this.exportee=Y(10),this}if(state.tokens.next.value==="{"){K("{");for(;;){f[Tt()]=!0;if(state.tokens.next.value!==","){if(state.tokens.next.value==="}"){K("}");break}z("E024",state.tokens.next,state.tokens.next.value);break}K(",")}return this}return state.tokens.next.id==="var"?(K("var"),f[state.tokens.next.value]=!0,state.syntax["var"].fud.call(state.syntax["var"].fud)):state.tokens.next.id==="let"?(K("let"),f[state.tokens.next.value]=!0,state.syntax.let.fud.call(state.syntax.let.fud)):state.tokens.next.id==="const"?(K("const"),f[state.tokens.next.value]=!0,state.syntax["const"].fud.call(state.syntax["const"].fud)):state.tokens.next.id==="function"?(this.block=!0,K("function"),f[state.tokens.next.value]=!0,state.syntax["function"].fud()):state.tokens.next.id==="class"?(this.block=!0,K("class"),f[state.tokens.next.value]=!0,state.syntax["class"].fud()):z("E024",state.tokens.next,state.tokens.next.value),this}).exps=!0,ct("abstract"),ct("boolean"),ct("byte"),ct("char"),ct("class",{es5:!0,nud:Kt}),ct("double"),ct("enum",{es5:!0}),ct("export",{es5:!0}),ct("extends",{es5:!0}),ct("final"),ct("float"),ct("goto"),ct("implements",{es5:!0,strictOnly:!0}),ct("import",{es5:!0}),ct("int"),ct("interface",{es5:!0,strictOnly:!0}),ct("long"),ct("native"),ct("package",{es5:!0,strictOnly:!0}),ct("private",{es5:!0,strictOnly:!0}),ct("protected",{es5:!0,strictOnly:!0}),ct("public",{es5:!0,strictOnly:!0}),ct("short"),ct("static",{es5:!0,strictOnly:!0}),ct("super",{es5:!0}),ct("synchronized"),ct("transient"),ct("volatile");var Gt=function(){var e,t,n=-1,r=0,i={};_.contains(["[","{"],state.tokens.curr.value)&&(r+=1);do{e=n===-1?state.tokens.next:J(n),t=J(n+1),n+=1,_.contains(["[","{"],e.value)?r+=1:_.contains(["]","}"],e.value)&&(r-=1);if(e.identifier&&e.value==="for"&&r===1){i.isCompArray=!0,i.notJson=!0;break}if(_.contains(["}","]"],e.value)&&r===0){if(t.value==="="){i.isDestAssign=!0,i.notJson=!0;break}if(t.value==="."){i.notJson=!0;break}}e.value===";"&&(i.isBlock=!0,i.notJson=!0)}while(r>0&&e.id!=="(end)"&&n<15);return i},Zt=function(){function r(e){var t=n.variables.filter(function(t){if(t.value===e)return t.undef=!1,e}).length;return t!==0}function i(e){var t=n.variables.filter(function(t){if(t.value===e&&!t.undef)return t.unused===!0&&(t.unused=!1),e}).length;return t===0}var e=function(){this.mode="use",this.variables=[]},t=[],n;return{stack:function(){n=new e,t.push(n)},unstack:function(){n.variables.filter(function(e){e.unused&&R("W098",e.token,e.value),e.undef&&I(e.funct,"W117",e.token,e.value)}),t.splice(-1,1),n=t[t.length-1]},setState:function(e){_.contains(["use","define","generate","filter"],e)&&(n.mode=e)},check:function(e){if(!n)return;return n&&n.mode==="use"?(i(e)&&n.variables.push({funct:c,token:state.tokens.curr,value:e,undef:!0,unused:!1}),!0):n&&n.mode==="define"?(r(e)||n.variables.push({funct:c,token:state.tokens.curr,value:e,undef:!1,unused:!0}),!0):n&&n.mode==="generate"?(I(c,"W117",state.tokens.curr,e),!0):n&&n.mode==="filter"?(i(e)&&I(c,"W117",state.tokens.curr,e),!0):!1}}},tn=function(){function n(){for(var t in e)if(e[t]["(type)"]==="unused"&&state.option.unused){var n=e[t]["(token)"],r=n.line,i=n.character;U("W098",r,i,t)}}var e={},t=[e];return{stack:function(){e={},t.push(e)},unstack:function(){n(),t.splice(t.length-1,1),e=_.last(t)},getlabel:function(e){for(var n=t.length-1;n>=0;--n)if(_.has(t[n],e)&&!t[n][e]["(shadowed)"])return t[n]},shadow:function(e){for(var n=t.length-1;n>=0;n--)_.has(t[n],e)&&(t[n][e]["(shadowed)"]=!0)},unshadow:function(e){for(var n=t.length-1;n>=0;n--)_.has(t[n],e)&&(t[n][e]["(shadowed)"]=!1)},current:{has:function(t){return _.has(e,t)},add:function(t,n,r){e[t]={"(type)":n,"(token)":r,"(shadowed)":!1}}}}},nn=function(e,n,r){function M(e,t){if(!e)return;!Array.isArray(e)&&typeof e=="object"&&(e=Object.keys(e)),e.forEach(t)}var i,s,o,u,l={},E={};n=_.clone(n),state.reset(),n&&n.scope?JSHINT.scope=n.scope:(JSHINT.errors=[],JSHINT.undefs=[],JSHINT.internals=[],JSHINT.blacklist={},JSHINT.scope="(main)"),S=Object.create(null),H(S,vars.ecmaIdentifiers),H(S,vars.reservedVars),H(S,r||{}),a=Object.create(null),f=Object.create(null);if(n){M(n.predef||null,function(e){var t,r;e[0]==="-"?(t=e.slice(1),JSHINT.blacklist[t]=t):(r=Object.getOwnPropertyDescriptor(n.predef,e),S[e]=r?r.value:!1)}),M(n.exported||null,function(e){f[e]=!0}),delete n.predef,delete n.exported,u=Object.keys(n);for(o=0;o<u.length;o++)/^-W\d{3}$/g.test(u[o])?E[u[o].slice(1)]=!0:(l[u[o]]=n[u[o]],u[o]==="newcap"&&n[u[o]]===!1&&(l["(explicitNewcap)"]=!0))}state.option=l,state.ignored=E,state.option.indent=state.option.indent||4,state.option.maxerr=state.option.maxerr||50,m=1,p=Object.create(S),x=p,c=It("(global)",null,x,{"(global)":!0,"(blockscope)":tn(),"(comparray)":Zt(),"(metrics)":Rt(state.tokens.next)}),h=[c],C=[],T=null,b={},w=null,d={},v=!1,g=[],N=[];if(!O(e)&&!Array.isArray(e))return W("E004",0),!1;t={get isJSON(){return state.jsonMode},getOption:function(e){return state.option[e]||null},getCache:function(e){return state.cache[e]},setCache:function(e,t){state.cache[e]=t},warn:function(e,t){U.apply(null,[e,t.line,t.char].concat(t.data))},on:function(e,t){e.split(" ").forEach(function(e){L.on(e,t)}.bind(this))}},L.removeAllListeners(),(k||[]).forEach(function(e){e(t)}),state.tokens.prev=state.tokens.curr=state.tokens.next=state.syntax["(begin)"],y=new Lexer(e),y.on("warning",function(e){U.apply(null,[e.code,e.line,e.character].concat(e.data))}),y.on("error",function(e){W.apply(null,[e.code,e.line,e.character].concat(e.data))}),y.on("fatal",function(e){F("E041",e.line,e.from)}),y.on("Identifier",function(e){L.emit("Identifier",e)}),y.on("String",function(e){L.emit("String",e)}),y.on("Number",function(e){L.emit("Number",e)}),y.start();for(var D in n)_.has(n,D)&&A(D,state.tokens.curr);j(),H(S,r||{}),nt.first=!0;try{K();switch(state.tokens.next.id){case"{":case"[":Yt();break;default:At(),state.directive["use strict"]&&!state.option.globalstrict&&!state.option.node&&!state.option.phantom&&R("W097",state.tokens.prev),Lt()}K(state.tokens.next&&state.tokens.next.value!=="."?"(end)":undefined),c["(blockscope)"].unstack();var P=function(e,t){do{if(typeof t[e]=="string")return t[e]==="unused"?t[e]="var":t[e]==="unction"&&(t[e]="closure"),!0;t=t["(context)"]}while(t);return!1},B=function(e,t){if(!d[e])return;var n=[];for(var r=0;r<d[e].length;r+=1)d[e][r]!==t&&n.push(d[e][r]);n.length===0?delete d[e]:d[e]=n},I=function(e,t,n,r){var i=t.line,s=t.from;r===undefined&&(r=state.option.unused),r===!0&&(r="last-param");var o={vars:["var"],"last-param":["var","param"],strict:["var","param","last-param"]};r&&o[r]&&o[r].indexOf(n)!==-1&&U("W098",i,s,e),N.push({name:e,line:i,character:s})},q=function(e,t){var n=e[t],r=e["(tokens)"][t];if(t.charAt(0)==="(")return;if(n!=="unused"&&n!=="unction"&&n!=="const")return;if(e["(params)"]&&e["(params)"].indexOf(t)!==-1)return;if(e["(global)"]&&_.has(f,t))return;if(n==="const"&&!Ft(e,t,"unused"))return;I(t,r,"var")};for(i=0;i<JSHINT.undefs.length;i+=1)s=JSHINT.undefs[i].slice(0),P(s[2].value,s[0])?B(s[2].value,s[2].line):state.option.undef&&R.apply(R,s.slice(1));h.forEach(function(e){if(e["(unusedOption)"]===!1)return;for(var t in e)_.has(e,t)&&q(e,t);if(!e["(params)"])return;var n=e["(params)"].slice(),r=n.pop(),i,s;while(r){i=e[r],s=e["(unusedOption)"]||state.option.unused,s=s===!0?"last-param":s;if(r==="undefined")return;if(i==="unused"||i==="unction")I(r,e["(tokens)"][r],"param",e["(unusedOption)"]);else if(s==="last-param")return;r=n.pop()}});for(var z in a)_.has(a,z)&&!_.has(p,z)&&!_.has(f,z)&&I(z,a[z],"var")}catch(X){if(!X||X.name!=="JSHintError")throw X;var V=state.tokens.next||{};JSHINT.errors.push({scope:"(main)",raw:X.raw,code:X.code,reason:X.message,line:X.line||V.line,character:X.character||V.from},null)}if(JSHINT.scope==="(main)"){n=n||{};for(i=0;i<JSHINT.internals.length;i+=1)s=JSHINT.internals[i],n.scope=s.elem,nn(s.value,n,r)}return JSHINT.errors.length===0};return nn.addModule=function(e){k.push(e)},nn.addModule(style.register),nn.data=function(){var e={functions:[],options:state.option},t=[],n=[],r,i,s,o,u,a;nn.errors.length&&(e.errors=nn.errors),state.jsonMode&&(e.json=!0);for(u in d)_.has(d,u)&&t.push({name:u,line:d[u]});t.length>0&&(e.implieds=t),C.length>0&&(e.urls=C),a=Object.keys(x),a.length>0&&(e.globals=a);for(s=1;s<h.length;s+=1){i=h[s],r={};for(o=0;o<l.length;o+=1)r[l[o]]=[];for(o=0;o<l.length;o+=1)r[l[o]].length===0&&delete r[l[o]];r.name=i["(name)"],r.param=i["(params)"],r.line=i["(line)"],r.character=i["(character)"],r.last=i["(last)"],r.lastcharacter=i["(lastcharacter)"],r.metrics={complexity:i["(metrics)"].ComplexityCount,parameters:(i["(params)"]||[]).length,statements:i["(metrics)"].statementCount},e.functions.push(r)}N.length>0&&(e.unused=N),n=[];for(u in b)if(typeof b[u]=="number"){e.member=b;break}return e},nn.jshint=nn,nn}();typeof exports=="object"&&exports&&(exports.JSHINT=JSHINT);