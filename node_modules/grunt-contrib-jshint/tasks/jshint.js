/*
 * grunt-contrib-jshint
 * http://gruntjs.com/
 *
 * Copyright (c) 2014 "Cowboy" Ben Alman, contributors
 * Licensed under the MIT license.
 */

module.exports=function(e){var t=require("path"),n=require("hooker"),r=require("./lib/jshint").init(e);e.registerMultiTask("jshint","Validate files with JSHint.",function(){var i=this.async(),s=this.options({force:!1,reporterOutput:null}),o=s.force;delete s.force;var u=s.reporterOutput,a="";u&&n.hook(process.stdout,"write",{pre:function(e){return a+=e,n.preempt()}}),r.lint(this.filesSrc,s,function(s,f){var l=0;if(s.length>0){l=o;if(r.usingGruntReporter===!0){var c=e.util._.reduce(s,function(e,t){return e+(t.error?1:0)},0),h=f.length;e.log.error(c+" "+e.util.pluralize(c,"error/errors")+" in "+h+" "+e.util.pluralize(h,"file/files"))}}else r.usingGruntReporter===!0&&f.length>0&&e.log.ok(f.length+" "+e.util.pluralize(f.length,"file/files")+" lint free.");if(u){n.unhook(process.stdout,"write"),u=e.template.process(u);var p=t.dirname(u);e.file.exists(p)||e.file.mkdir(p),e.file.write(u,a),e.log.ok('Report "'+u+'" created.')}i(l)})})};