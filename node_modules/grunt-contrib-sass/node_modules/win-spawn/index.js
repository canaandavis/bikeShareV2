function spawn(e,t,n){if(os==="Windows_NT"){e=e.replace(/\//g,"\\");if(e==="rm"){e="rmdir";if(t[0]==="-rf"||t[0]=="-fr")t[0]="/q",t.unshift("/s");t[0]==="-f"&&(t[0]="/q"),t[0]==="-r"&&(t[0]="/s")}t=t||[],n=n||{};var r,i;if(i=/((?:[A-Z_]+\=[^ \=]+ )+)?([^\r\n]+)/.exec(e))try{var s=require("fs").readFileSync(i[2],"utf8");if(r=/\#\!\/usr\/bin\/env ([^\r\n]+)/.exec(s))t.unshift(i[2]),e=(i[1]||"")+r[1]}catch(o){}if(r=/((?:[A-Z_]+\=[^ \=]+ )+)([^\r\n]+)/.exec(e)){e=r[2],n.env=n.env||shallowClone(process.env);var u=r[1].split(" ");u.forEach(function(e){e=e.split("="),e.length===2&&(n.env[e[0]]=e[1])})}t.unshift(e),t.unshift("/c"),t.unshift("/d"),e="cmd"}return cSpawn(e,t,n)}function shallowClone(e){var t={};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}var cSpawn=require("child_process").spawn,os=require("os").type();exports=module.exports=spawn;